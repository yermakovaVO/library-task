# library-task
- [Тестовое задание 1](##Тестовое)
- [Запуск](##Запуск)
- [Описание](##Описание)
    * [Swagger](####Swagger)
    * [Схема БД:](###Схема)
    * [Список курлов для тестирования](###[Список])
    * [TODO в случае "выхода в пром"](###TODO)

## Тестовое задание1:

Java - не ниже java8

Приложение на spring boot web

Обязательные зависимости в скриншоте
Необходимо реализовать CRUD (create, update, get...) репозиторий для сущностей: Автор, Книги, Жанры.
И endpoint который выдает все книги, и позволяющий опционально принимать в качестве параметра автора и/или жанр, м в
этом случае, ограничивающую выборку по ним

В случае если указан не существующий автор или жанр - выдаем ошибку.
Аутентификация/авторизация - не нужна.

База данных - на свое усмотрение. Главное требование - проект должен запускаться после прочтения Readme файла. Можно
поднять в облаке базу данных, можно использовать Docker, Можно использовать h2.
Вариант - "настройте локально postgres" не принимается.

Задания со зведочкой (можно не делать, но будет большой плюс):

1. Сделать тесты - SpringBootTest, мокаем репозитории, обращаемся на endpoints через RestTemplate. Обязательно проверить
   кейс, когда отдается ошибка и кейс на создание любой сущности.
2. Настроить создание и насыщение таблиц при старте проекта

## Запуск

Для запуска необходимо запустить docker и выполнить `Run all` compound config в Idea. (Если Вы просматриваете это readme
в idea в edit mode- просто нажать play слева от текущей строки)

Либо, в случае, если это невозможно - запустить отдельно docker, docker-compose.yml и `mvn spring-boot:run`

## Описание

### Swagger:

http://localhost:8080/swagger-ui/index.html

### Схема БД:

![Схема](/scheme.jpg)

### [Список курлов для тестирования](/Список%20курлов.md)

### TODO в случае "выхода в пром"

1. Добавить external_id на таблицы для проливки связанных csv-шек и для
   того чтобы ходить по Long айдишкам внутри системы, а во вне отдавать текстовые external id чтобы недоброжелатель не
   мог перебрать по айдишкам всю нашу базу

2. Также сделала бы GENERATED ALWAYS AS IDENTITY для сквозной нумерации, тк не было бы проблем с проливкой

3. Также если делать целевой вариант - нужно разделить авторство и личные данные человека (person и author)

4. Схему нарисовала больше, чем требовалось (+ gender, некоторые поля и т д, но поняла, что не успеваю). Также
   разделение на author и person строго говоря не совсем вписывалось в тз, делала по тз. 
